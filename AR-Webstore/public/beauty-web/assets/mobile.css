/* Mobile optimizations for Beauty Web app */

/* Fix layout on mobile devices */
@media (max-width: 768px) {
  html, body {
    position: relative !important;
    width: 100% !important;
    max-width: 100vw !important;
    height: 100% !important;
    overflow-x: hidden !important;
    margin: 0 !important;
    padding: 0 !important;
    -webkit-text-size-adjust: 100% !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Fix container widths */
  .container, .bnb-app, .bnb-layout, .columns, .column {
    width: 100% !important;
    max-width: 100% !important;
    padding: 0 !important;
    margin: 0 !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
  }
  
  /* Fix side panels - use 100% width to prevent cutting */
  .bnb-layout__side, .sidebar, .panel, .bnb-settings {
    width: 100% !important;
    max-width: 100vw !important;
    left: 0 !important;
    right: 0 !important;
    overflow-x: hidden !important;
    box-sizing: border-box !important;
    padding-right: 15px !important;
    position: relative !important;
    border-right: none !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }
  
  /* Fix buttons and controls */
  .button, button, .navbar-item, .panel-block {
    padding: 0.5em 1em !important;
    font-size: 14px !important;
    max-width: 90vw !important;
    width: auto !important;
    white-space: normal !important;
    word-break: break-word !important;
    margin-left: auto !important;
    margin-right: auto !important;
    min-height: 44px !important;
    touch-action: manipulation !important;
  }
  
  /* Fix file upload buttons */
  .file, .file-label, .file-cta, .upload {
    max-width: 90vw !important;
    width: auto !important;
    white-space: normal !important;
    word-break: break-word !important;
    height: auto !important;
    min-height: 2.5em !important;
    margin-left: auto !important;
    margin-right: auto !important;
    position: relative !important;
    left: 0 !important;
  }
  
  /* Fix spans inside buttons */
  .file-label span, .button span, .file-name {
    white-space: normal !important;
    overflow: visible !important;
    word-break: break-word !important;
  }
  
  /* Fix icons inside buttons */
  .file-label .icon, .button .icon {
    margin-right: 5px !important;
    flex-shrink: 0 !important;
  }
  
  /* Fix inputs */
  input, select, .input, .select {
    font-size: 16px !important; /* Prevents iOS zoom on focus */
  }
  
  /* Fix canvas container */
  #webar {
    width: 100vw !important;
    height: 100vh !important;
  }
  
  /* Ensure UI is above canvas */
  .bnb-layout__side, .bnb-app {
    z-index: 10 !important;
  }
  
  /* Make tabs more touchable */
  .tabs a {
    padding: 0.75em 1em !important;
    font-size: 14px !important;
  }
  
  /* Fix color pickers */
  .color-picker {
    max-width: 85vw !important;
  }
  
  /* Hide non-essential elements */
  .is-hidden-mobile {
    display: none !important;
  }
  
  /* Ensure proper panel sizing */
  .panel, .panel-block {
    width: 100% !important;
    padding: 0.5rem !important;
  }
  
  /* Make sliders more touchable */
  .slider {
    height: 30px !important;
  }
  
  /* Fix columns layout */
  .columns {
    margin: 0 !important;
    display: flex !important;
    flex-direction: column !important;
  }
  
  .column {
    padding: 0.25rem !important;
    width: 100% !important;
  }
  
  /* Set order for mobile layout */
  #camera-container, .bnb-layout__main {
    order: 1;
    width: 100% !important;
    max-width: 100vw !important;
  }
  
  #sidebar-container, .bnb-layout__side {
    order: 2;
    width: 100% !important;
    max-width: 100vw !important;
    margin-top: 10px !important;
  }
  
  /* Fix navbar menu on mobile */
  .navbar-menu {
    display: flex !important;
    width: 100% !important;
    overflow-x: auto !important;
  }
  
  /* Hide scrollbar in navbar */
  .navbar-menu::-webkit-scrollbar {
    display: none;
  }
  
  /* Make navbar items fit better */
  .navbar-item {
    padding: 0.5rem 0.75rem !important;
    white-space: nowrap !important;
  }
  
  /* Fix navbar end items */
  .navbar-end {
    margin-right: 0 !important;
    justify-content: flex-end !important;
  }
  
  /* Fix video container */
  video, .camera-container, .bnb-layout__main, #camera-container {
    width: 100% !important;
    max-width: 100vw !important;
    height: auto !important;
    aspect-ratio: 3/4;
  }
  
  /* Fix panel blocks scrolling */
  .panel-blocks {
    max-height: 300px !important;
    overflow-y: auto !important;
    overflow-x: hidden !important;
    width: 100% !important;
  }
  
  /* Fix absolute positioned elements */
  [style*="position: absolute"] {
    max-width: 100vw !important;
    right: auto !important;
  }
  
  /* Fix upload photo button position */
  .upload-photo-button {
    position: fixed !important;
    bottom: 70px !important;
    right: 20px !important;
    z-index: 999 !important;
    width: auto !important;
  }
  
  /* Handle iPhone notches */
  @supports (padding: max(0px)) {
    body {
      padding-left: max(0px, env(safe-area-inset-left));
      padding-right: max(0px, env(safe-area-inset-right));
      padding-bottom: max(0px, env(safe-area-inset-bottom));
    }
    
    .mobile-bottom-menu {
      padding-bottom: max(10px, env(safe-area-inset-bottom));
    }
  }
  
  /* Fix tabs and tab content */
  .tabs, .tab-content {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }
  
  .panel-tabs {
    display: flex !important;
    flex-wrap: wrap !important;
  }
  
  .panel-tabs a {
    flex: 1 1 auto !important;
    text-align: center !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }
  
  /* Fix image sizing */
  .viewer, .bnb-viewer, img.uploaded-image {
    width: 100% !important;
    max-width: 100vw !important;
    overflow: hidden !important;
  }
}

.panel-block span {
  font-size: 16px !important;
  color: #4a6aed !important;
  font-weight: 500 !important;
}

/* Menu header styling */
.panel-heading {
  background-color: transparent !important;
  color: #4a6aed !important;
  font-size: 18px !important;
  font-weight: 600 !important;
  padding: 15px 10px !important;
  text-align: center !important;
}

/* Button styling */
.button {
  border-radius: 20px !important;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1) !important;
}

/* Download button */
.button.is-primary {
  background-color: #4a6aed !important;
  border-radius: 25px !important;
  padding: 8px 20px !important;
  font-weight: 500 !important;
  box-shadow: 0 3px 10px rgba(74, 106, 237, 0.2) !important;
}

/* Status text */
.has-text-centered {
  color: #999 !important;
  font-size: 14px !important;
}

/* Upload Photo Button */
.upload-photo-button-container {
  position: fixed;
  bottom: 80px;
  right: 20px;
  z-index: 9999;
}

.upload-photo-button {
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background-color: #ff4081;
  border: none;
  box-shadow: 0 3px 6px rgba(0,0,0,0.16), 0 3px 6px rgba(0,0,0,0.23);
  display: flex;
  justify-content: center;
  align-items: center;
}

/* iPhone X+ safe area adjustments */
@supports (padding: max(0px)) {
  body {
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
    padding-top: max(0px, env(safe-area-inset-top));
    padding-bottom: max(0px, env(safe-area-inset-bottom));
  }
  
  .upload-photo-button-container {
    bottom: calc(80px + env(safe-area-inset-bottom));
    right: max(20px, env(safe-area-inset-right));
  }
}